<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-i18n="course_builder.title">Drag-and-Drop Course Builder - ShatziiOS</title>
    <meta
      name="description"
      content="Build custom, accessible courses for neurodivergent learners with our visual drag-and-drop course builder."
    />

    <!-- Favicon and icons -->
    <link rel="icon" href="/favicon.ico" />

    <!-- Font Awesome for icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />

    <!-- Base Stylesheet -->
    <link rel="stylesheet" href="/css/global.css" />

    <style>
      .course-builder {
        padding: 2rem 1rem;
        max-width: 1400px;
        margin: 0 auto;
      }

      .page-title {
        margin-bottom: 1.5rem;
        color: var(--primary-color);
      }

      .builder-container {
        display: grid;
        grid-template-columns: 300px 1fr;
        gap: 2rem;
        margin-top: 2rem;
      }

      @media (max-width: 1024px) {
        .builder-container {
          grid-template-columns: 1fr;
        }
      }

      /* Components panel */
      .components-panel {
        background-color: #f8f9fa;
        border-radius: 8px;
        padding: 1rem;
        border: 1px solid #e2e8f0;
      }

      .components-panel h2 {
        font-size: 1.25rem;
        margin-top: 0;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid #e2e8f0;
      }

      .component-group {
        margin-bottom: 1.5rem;
      }

      .component-group h3 {
        font-size: 1rem;
        margin-bottom: 0.75rem;
        color: #4a5568;
      }

      .component-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
        gap: 0.5rem;
      }

      .component-item {
        background-color: white;
        border: 1px solid #e2e8f0;
        border-radius: 4px;
        padding: 0.75rem;
        cursor: grab;
        transition: all 0.2s ease;
        user-select: none;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
      }

      .component-item:hover {
        border-color: var(--primary-color);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .component-item i {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
        color: var(--primary-color);
      }

      .component-item.dragging {
        opacity: 0.5;
      }

      /* Course canvas */
      .course-canvas {
        background-color: white;
        border-radius: 8px;
        padding: 1.5rem;
        border: 1px solid #e2e8f0;
        min-height: 600px;
      }

      .canvas-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
      }

      .canvas-header h2 {
        font-size: 1.25rem;
        margin: 0;
      }

      .canvas-actions {
        display: flex;
        gap: 0.5rem;
      }

      .canvas-button {
        display: inline-flex;
        align-items: center;
        padding: 0.5rem 1rem;
        border-radius: 4px;
        background-color: var(--primary-color);
        color: white;
        border: none;
        cursor: pointer;
        font-size: 0.875rem;
        transition: background-color 0.2s ease;
      }

      .canvas-button i {
        margin-right: 0.5rem;
      }

      .canvas-button:hover {
        background-color: #0056b3;
      }

      .canvas-button.secondary {
        background-color: #f8f9fa;
        color: #4a5568;
        border: 1px solid #e2e8f0;
      }

      .canvas-button.secondary:hover {
        background-color: #e2e8f0;
      }

      .canvas-button.danger {
        background-color: #e53e3e;
      }

      .canvas-button.danger:hover {
        background-color: #c53030;
      }

      .course-title-input {
        margin-bottom: 1.5rem;
      }

      .course-title-input input {
        width: 100%;
        padding: 0.75rem;
        font-size: 1.25rem;
        border: 1px solid #e2e8f0;
        border-radius: 4px;
        font-weight: bold;
      }

      .course-modules {
        min-height: 400px;
      }

      /* Module styling */
      .course-module {
        background-color: #f8f9fa;
        border-radius: 6px;
        margin-bottom: 1.5rem;
        border: 1px solid #e2e8f0;
        overflow: hidden;
      }

      .module-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
        background-color: #edf2f7;
        border-bottom: 1px solid #e2e8f0;
        cursor: grab;
      }

      .module-header h3 {
        margin: 0;
        font-size: 1.1rem;
      }

      .module-header .module-actions {
        display: flex;
        gap: 0.5rem;
      }

      .module-header button {
        background: none;
        border: none;
        font-size: 1rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 30px;
        height: 30px;
        border-radius: 4px;
        color: #4a5568;
      }

      .module-header button:hover {
        background-color: rgba(0, 0, 0, 0.05);
      }

      .module-content {
        padding: 1rem;
      }

      .module-items {
        min-height: 50px;
      }

      .add-module-button {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        background-color: #f8f9fa;
        border: 2px dashed #e2e8f0;
        border-radius: 6px;
        cursor: pointer;
        font-size: 1rem;
        color: #4a5568;
        transition: all 0.2s ease;
      }

      .add-module-button:hover {
        background-color: #edf2f7;
        border-color: #cbd5e0;
      }

      .add-module-button i {
        margin-right: 0.5rem;
      }

      /* Module items styling */
      .module-item {
        display: flex;
        align-items: center;
        background-color: white;
        padding: 0.75rem;
        border-radius: 4px;
        border: 1px solid #e2e8f0;
        margin-bottom: 0.75rem;
        cursor: grab;
      }

      .module-item-icon {
        margin-right: 0.75rem;
        color: var(--primary-color);
        font-size: 1.25rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .module-item-content {
        flex: 1;
      }

      .module-item-title {
        font-weight: 500;
        margin-bottom: 0.25rem;
      }

      .module-item-description {
        font-size: 0.875rem;
        color: #718096;
      }

      .module-item-actions {
        display: flex;
        gap: 0.5rem;
      }

      .module-item-actions button {
        background: none;
        border: none;
        font-size: 1rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 30px;
        height: 30px;
        border-radius: 4px;
        color: #4a5568;
      }

      .module-item-actions button:hover {
        background-color: rgba(0, 0, 0, 0.05);
      }

      /* Dropzone styling */
      .dropzone {
        border: 2px dashed #3182ce;
        background-color: rgba(49, 130, 206, 0.05);
        border-radius: 4px;
        margin-bottom: 0.75rem;
        min-height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #3182ce;
        font-size: 0.875rem;
      }

      /* Accessibility options */
      .accessibility-options {
        margin-top: 2rem;
        background-color: #f8f9fa;
        border-radius: 8px;
        padding: 1rem;
        border: 1px solid #e2e8f0;
      }

      .accessibility-options h2 {
        font-size: 1.25rem;
        margin-top: 0;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid #e2e8f0;
      }

      .options-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
      }

      .option-item {
        display: flex;
        align-items: flex-start;
      }

      .option-item input {
        margin-right: 0.5rem;
        margin-top: 0.25rem;
      }

      .option-content h4 {
        margin: 0 0 0.25rem 0;
        font-size: 1rem;
      }

      .option-content p {
        margin: 0;
        font-size: 0.875rem;
        color: #718096;
      }

      /* Modal for item editing */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
        visibility: hidden;
        opacity: 0;
        transition:
          visibility 0s linear 0.2s,
          opacity 0.2s ease;
      }

      .modal-overlay.active {
        visibility: visible;
        opacity: 1;
        transition-delay: 0s;
      }

      .modal-content {
        background-color: white;
        border-radius: 8px;
        max-width: 600px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transform: scale(0.9);
        transition: transform 0.2s ease;
      }

      .modal-overlay.active .modal-content {
        transform: scale(1);
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
        border-bottom: 1px solid #e2e8f0;
      }

      .modal-header h2 {
        margin: 0;
        font-size: 1.25rem;
      }

      .modal-close {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: #718096;
      }

      .modal-body {
        padding: 1rem;
      }

      .form-group {
        margin-bottom: 1rem;
      }

      .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
      }

      .form-group input[type='text'],
      .form-group textarea,
      .form-group select {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid #e2e8f0;
        border-radius: 4px;
        font-size: 1rem;
      }

      .form-group textarea {
        min-height: 100px;
        resize: vertical;
      }

      .modal-footer {
        padding: 1rem;
        border-top: 1px solid #e2e8f0;
        display: flex;
        justify-content: flex-end;
        gap: 0.5rem;
      }

      .modal-button {
        padding: 0.5rem 1rem;
        border-radius: 4px;
        border: none;
        cursor: pointer;
        font-size: 0.875rem;
        transition: background-color 0.2s ease;
      }

      .modal-button.primary {
        background-color: var(--primary-color);
        color: white;
      }

      .modal-button.primary:hover {
        background-color: #0056b3;
      }

      .modal-button.secondary {
        background-color: #f8f9fa;
        color: #4a5568;
        border: 1px solid #e2e8f0;
      }

      .modal-button.secondary:hover {
        background-color: #e2e8f0;
      }

      /* High contrast mode adjustments */
      .high-contrast .components-panel,
      .high-contrast .course-canvas,
      .high-contrast .accessibility-options {
        background-color: black;
        border-color: white;
      }

      .high-contrast .component-item {
        background-color: #1a202c;
        border-color: #4a5568;
      }

      .high-contrast .component-item:hover {
        border-color: white;
      }

      .high-contrast .course-module {
        background-color: #1a202c;
        border-color: white;
      }

      .high-contrast .module-header {
        background-color: #2d3748;
        border-color: white;
      }

      .high-contrast .module-item {
        background-color: #1a202c;
        border-color: #4a5568;
      }

      .high-contrast .canvas-button.secondary {
        background-color: #2d3748;
        color: white;
        border-color: white;
      }

      /* ADHD-friendly mode adjustments */
      .adhd-friendly .component-item,
      .adhd-friendly .module-item,
      .adhd-friendly .course-module {
        transition: none;
      }

      .adhd-friendly .options-grid {
        gap: 1.5rem;
      }

      /* Dyslexia-friendly mode adjustments */
      .dyslexia-friendly .component-item,
      .dyslexia-friendly .module-item-title,
      .dyslexia-friendly .module-item-description,
      .dyslexia-friendly .option-content p {
        line-height: 1.6;
      }
    </style>
  </head>
  <body>
    <!-- Site Header -->
    <div data-include="/includes/header.html"></div>

    <div class="course-builder">
      <h1 class="page-title" data-i18n="course_builder.title">Drag-and-Drop Course Builder</h1>

      <p data-i18n="course_builder.intro">
        Create customized, accessible courses for neurodivergent learners using our visual
        drag-and-drop interface. Drag components from the left panel into your course modules,
        arrange them in the order you want, and customize their content.
      </p>

      <div class="builder-container">
        <!-- Components Panel -->
        <div class="components-panel">
          <h2 data-i18n="course_builder.components_title">Course Components</h2>

          <div class="component-group">
            <h3 data-i18n="course_builder.content_components">Content Components</h3>
            <div class="component-list">
              <div class="component-item" draggable="true" data-component-type="text">
                <i class="fas fa-align-left"></i>
                <span data-i18n="course_builder.components.text">Text</span>
              </div>
              <div class="component-item" draggable="true" data-component-type="image">
                <i class="fas fa-image"></i>
                <span data-i18n="course_builder.components.image">Image</span>
              </div>
              <div class="component-item" draggable="true" data-component-type="video">
                <i class="fas fa-video"></i>
                <span data-i18n="course_builder.components.video">Video</span>
              </div>
              <div class="component-item" draggable="true" data-component-type="audio">
                <i class="fas fa-volume-up"></i>
                <span data-i18n="course_builder.components.audio">Audio</span>
              </div>
            </div>
          </div>

          <div class="component-group">
            <h3 data-i18n="course_builder.interactive_components">Interactive Components</h3>
            <div class="component-list">
              <div class="component-item" draggable="true" data-component-type="quiz">
                <i class="fas fa-question-circle"></i>
                <span data-i18n="course_builder.components.quiz">Quiz</span>
              </div>
              <div class="component-item" draggable="true" data-component-type="assignment">
                <i class="fas fa-tasks"></i>
                <span data-i18n="course_builder.components.assignment">Assignment</span>
              </div>
              <div class="component-item" draggable="true" data-component-type="discussion">
                <i class="fas fa-comments"></i>
                <span data-i18n="course_builder.components.discussion">Discussion</span>
              </div>
              <div class="component-item" draggable="true" data-component-type="poll">
                <i class="fas fa-poll"></i>
                <span data-i18n="course_builder.components.poll">Poll</span>
              </div>
            </div>
          </div>

          <div class="component-group">
            <h3 data-i18n="course_builder.specialized_components">Specialized Components</h3>
            <div class="component-list">
              <div class="component-item" draggable="true" data-component-type="visualization">
                <i class="fas fa-chart-bar"></i>
                <span data-i18n="course_builder.components.visualization">Visualization</span>
              </div>
              <div class="component-item" draggable="true" data-component-type="flashcards">
                <i class="fas fa-clone"></i>
                <span data-i18n="course_builder.components.flashcards">Flashcards</span>
              </div>
              <div class="component-item" draggable="true" data-component-type="mindmap">
                <i class="fas fa-project-diagram"></i>
                <span data-i18n="course_builder.components.mindmap">Mind Map</span>
              </div>
              <div class="component-item" draggable="true" data-component-type="timeline">
                <i class="fas fa-stream"></i>
                <span data-i18n="course_builder.components.timeline">Timeline</span>
              </div>
            </div>
          </div>

          <div class="component-group">
            <h3 data-i18n="course_builder.accessibility_components">Accessibility Components</h3>
            <div class="component-list">
              <div class="component-item" draggable="true" data-component-type="summary">
                <i class="fas fa-list"></i>
                <span data-i18n="course_builder.components.summary">Key Points</span>
              </div>
              <div class="component-item" draggable="true" data-component-type="glossary">
                <i class="fas fa-book"></i>
                <span data-i18n="course_builder.components.glossary">Glossary</span>
              </div>
              <div class="component-item" draggable="true" data-component-type="break">
                <i class="fas fa-coffee"></i>
                <span data-i18n="course_builder.components.break">Break Time</span>
              </div>
              <div class="component-item" draggable="true" data-component-type="alternative">
                <i class="fas fa-universal-access"></i>
                <span data-i18n="course_builder.components.alternative">Alt. Format</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Course Canvas -->
        <div class="course-canvas">
          <div class="canvas-header">
            <h2 data-i18n="course_builder.course_content">Course Content</h2>
            <div class="canvas-actions">
              <button class="canvas-button secondary" id="preview-button">
                <i class="fas fa-eye"></i>
                <span data-i18n="course_builder.preview">Preview</span>
              </button>
              <button class="canvas-button" id="save-button">
                <i class="fas fa-save"></i>
                <span data-i18n="course_builder.save">Save Course</span>
              </button>
            </div>
          </div>

          <div class="course-title-input">
            <input
              type="text"
              id="course-title"
              placeholder="Enter course title..."
              data-i18n-placeholder="course_builder.course_title_placeholder"
            />
          </div>

          <div class="course-modules" id="course-modules">
            <!-- Example Module (will be created dynamically) -->
            <div class="course-module" id="module-1">
              <div class="module-header">
                <h3 contenteditable="true">Module 1: Introduction</h3>
                <div class="module-actions">
                  <button type="button" title="Expand/Collapse" class="toggle-module">
                    <i class="fas fa-chevron-up"></i>
                  </button>
                  <button type="button" title="Move Up" class="move-module-up">
                    <i class="fas fa-arrow-up"></i>
                  </button>
                  <button type="button" title="Move Down" class="move-module-down">
                    <i class="fas fa-arrow-down"></i>
                  </button>
                  <button type="button" title="Delete Module" class="delete-module">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </div>
              <div class="module-content">
                <div class="module-items" id="module-1-items">
                  <!-- Example Module Item (will be created dynamically) -->
                  <div
                    class="module-item"
                    draggable="true"
                    data-item-id="item-1"
                    data-item-type="text"
                  >
                    <div class="module-item-icon">
                      <i class="fas fa-align-left"></i>
                    </div>
                    <div class="module-item-content">
                      <div class="module-item-title">Welcome Message</div>
                      <div class="module-item-description">A brief introduction to the course</div>
                    </div>
                    <div class="module-item-actions">
                      <button type="button" title="Edit Item" class="edit-item">
                        <i class="fas fa-edit"></i>
                      </button>
                      <button type="button" title="Delete Item" class="delete-item">
                        <i class="fas fa-trash"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="add-module-button" id="add-module-button">
            <i class="fas fa-plus"></i>
            <span data-i18n="course_builder.add_module">Add Module</span>
          </div>
        </div>
      </div>

      <!-- Accessibility Options -->
      <div class="accessibility-options">
        <h2 data-i18n="course_builder.accessibility_settings">Accessibility Settings</h2>
        <p data-i18n="course_builder.accessibility_description">
          These settings will be applied to the entire course to make it more accessible for
          neurodivergent learners. You can customize these settings for each course.
        </p>

        <div class="options-grid">
          <div class="option-item">
            <input type="checkbox" id="dyslexia-support" checked />
            <div class="option-content">
              <h4 data-i18n="course_builder.dyslexia_support">Dyslexia Support</h4>
              <p data-i18n="course_builder.dyslexia_description">
                Enables dyslexia-friendly fonts, adjustable spacing, and text-to-speech options.
              </p>
            </div>
          </div>

          <div class="option-item">
            <input type="checkbox" id="adhd-support" checked />
            <div class="option-content">
              <h4 data-i18n="course_builder.adhd_support">ADHD Support</h4>
              <p data-i18n="course_builder.adhd_description">
                Adds focus tools, simplified interfaces, and break reminders.
              </p>
            </div>
          </div>

          <div class="option-item">
            <input type="checkbox" id="autism-support" checked />
            <div class="option-content">
              <h4 data-i18n="course_builder.autism_support">Autism Support</h4>
              <p data-i18n="course_builder.autism_description">
                Provides predictable layouts, sensory controls, and routine-based learning.
              </p>
            </div>
          </div>

          <div class="option-item">
            <input type="checkbox" id="text-to-speech" checked />
            <div class="option-content">
              <h4 data-i18n="course_builder.text_to_speech">Text-to-Speech</h4>
              <p data-i18n="course_builder.text_to_speech_description">
                Adds text-to-speech functionality for all text content.
              </p>
            </div>
          </div>

          <div class="option-item">
            <input type="checkbox" id="visual-supports" checked />
            <div class="option-content">
              <h4 data-i18n="course_builder.visual_supports">Visual Supports</h4>
              <p data-i18n="course_builder.visual_supports_description">
                Automatically adds relevant images and visual aids to text content.
              </p>
            </div>
          </div>

          <div class="option-item">
            <input type="checkbox" id="multiple-formats" checked />
            <div class="option-content">
              <h4 data-i18n="course_builder.multiple_formats">Multiple Formats</h4>
              <p data-i18n="course_builder.multiple_formats_description">
                Presents information in multiple formats (text, audio, visual).
              </p>
            </div>
          </div>

          <div class="option-item">
            <input type="checkbox" id="simplified-language" />
            <div class="option-content">
              <h4 data-i18n="course_builder.simplified_language">Simplified Language</h4>
              <p data-i18n="course_builder.simplified_language_description">
                Automatically simplifies complex language and provides definitions.
              </p>
            </div>
          </div>

          <div class="option-item">
            <input type="checkbox" id="progress-tracking" checked />
            <div class="option-content">
              <h4 data-i18n="course_builder.progress_tracking">Progress Tracking</h4>
              <p data-i18n="course_builder.progress_tracking_description">
                Visual progress indicators and achievement tracking.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Item Edit Modal -->
    <div class="modal-overlay" id="edit-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modal-title">Edit Item</h2>
          <button class="modal-close" id="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <form id="item-edit-form">
            <div class="form-group">
              <label for="item-title">Title</label>
              <input type="text" id="item-title" required />
            </div>
            <div class="form-group">
              <label for="item-description">Description</label>
              <input type="text" id="item-description" />
            </div>
            <div class="form-group">
              <label for="item-content">Content</label>
              <textarea id="item-content"></textarea>
            </div>
            <!-- Additional fields will be added dynamically based on component type -->
            <div id="additional-fields"></div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="modal-button secondary" id="modal-cancel">Cancel</button>
          <button type="button" class="modal-button primary" id="modal-save">Save Changes</button>
        </div>
      </div>
    </div>

    <!-- Site Footer -->
    <div data-include="/includes/footer.html"></div>

    <script src="/js/include-html.js"></script>
    <script src="/js/course-builder.js"></script>
  </body>
</html>
