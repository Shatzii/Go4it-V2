<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contextual Help Bubbles Demo | ShotziOS</title>
    <link rel="stylesheet" href="/css/neurodivergent-theme.css" />
    <link rel="stylesheet" href="/css/dashboard.css" />
    <style>
      .demo-container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
      }

      .control-panel {
        background-color: rgba(0, 0, 0, 0.3);
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 30px;
      }

      .demo-section {
        background-color: rgba(0, 0, 0, 0.2);
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        position: relative;
      }

      .demo-section h3 {
        margin-top: 0;
        color: var(--accent-color);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        padding-bottom: 10px;
      }

      .controls-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
      }

      .control-group {
        margin-bottom: 20px;
      }

      .control-group h3 {
        margin-top: 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        padding-bottom: 8px;
        margin-bottom: 15px;
        color: var(--accent-color);
      }

      .button-group {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 15px;
      }

      .button-group button {
        background-color: rgba(30, 144, 255, 0.2);
        border: 1px solid rgba(30, 144, 255, 0.5);
        color: white;
        padding: 8px 12px;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .button-group button:hover {
        background-color: rgba(30, 144, 255, 0.4);
      }

      .button-group button.active {
        background-color: rgba(30, 144, 255, 0.7);
      }

      .debug-log {
        background-color: rgba(0, 0, 0, 0.5);
        border-radius: 5px;
        padding: 10px;
        margin-top: 20px;
        max-height: 200px;
        overflow-y: auto;
        font-family: monospace;
        font-size: 14px;
      }

      .debug-log p {
        margin: 5px 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        padding-bottom: 5px;
      }

      .debug-timestamp {
        color: rgba(255, 255, 255, 0.5);
        font-size: 12px;
        margin-right: 8px;
      }

      .mock-form {
        background-color: rgba(0, 0, 0, 0.3);
        padding: 20px;
        border-radius: 8px;
      }

      .form-group {
        margin-bottom: 15px;
      }

      .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        width: 100%;
        padding: 10px;
        background-color: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 5px;
        color: white;
      }

      .mock-nav {
        background-color: rgba(0, 0, 0, 0.3);
        padding: 15px;
        border-radius: 8px;
        display: flex;
        justify-content: space-between;
      }

      .mock-nav ul {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        gap: 15px;
      }

      .mock-nav li a {
        color: white;
        text-decoration: none;
        padding: 5px 10px;
        border-radius: 5px;
        transition: background-color 0.2s;
      }

      .mock-nav li a:hover {
        background-color: rgba(255, 255, 255, 0.1);
      }

      .feature-description {
        background-color: rgba(52, 152, 219, 0.1);
        border-left: 4px solid var(--accent-color);
        padding: 15px;
        margin: 20px 0;
        border-radius: 4px;
      }

      .explanation {
        margin-bottom: 40px;
      }
    </style>
  </head>
  <body
    class="neurodivergent-theme"
    data-auto-init-contextual-help
    data-help-character="stella"
    data-help-animation="medium"
    data-help-auto-show="true"
  >
    <header class="dashboard-header">
      <div class="logo">
        <a href="/superhero-school">
          <span class="logo-icon">ü¶∏‚Äç‚ôÄÔ∏è</span>
          <span class="logo-text">ShotziOS</span>
        </a>
      </div>
      <nav class="main-nav">
        <ul>
          <li><a href="/superhero-school">Home</a></li>
          <li><a href="/superhero-school/student-dashboard.html">Student Dashboard</a></li>
          <li>
            <a href="/superhero-school/dyslexia-curriculum-generator.html">Curriculum Generator</a>
          </li>
          <li><a href="/superhero-school/dyslexia-curriculum-upload.html">Upload Curriculum</a></li>
          <li><a href="/superhero-school/learning-companion-demo.html">Learning Companion</a></li>
          <li>
            <a href="/superhero-school/contextual-help-demo.html" class="active">Contextual Help</a>
          </li>
        </ul>
      </nav>
    </header>

    <main class="demo-container">
      <h1>Contextual Help Bubbles Demo</h1>

      <div class="explanation">
        <p>
          This demo showcases the contextual help system with playful character interactions. Hover
          over question mark icons (?) to get context-specific help and guidance. The system detects
          the page elements and provides relevant assistance.
        </p>

        <div class="feature-description">
          <h3>Key Features:</h3>
          <ul>
            <li>Characters with distinct personalities and animation styles</li>
            <li>Context-aware help bubbles that understand different page elements</li>
            <li>Interactive tips with navigation between related help topics</li>
            <li>Customizable animation levels for different sensory preferences</li>
            <li>Automatic detection of page elements that might need explanation</li>
          </ul>
        </div>
      </div>

      <div class="control-panel">
        <h2>Help System Controls</h2>
        <div class="controls-grid">
          <div class="control-group">
            <h3>Character</h3>
            <div class="button-group character-btns">
              <button class="active" data-character="stella">Stella (Encouraging)</button>
              <button data-character="max">Max (Enthusiastic)</button>
              <button data-character="nova">Nova (Calm)</button>
            </div>
          </div>

          <div class="control-group">
            <h3>Animation Level</h3>
            <div class="button-group animation-btns">
              <button data-animation="minimal">Minimal</button>
              <button class="active" data-animation="medium">Medium</button>
              <button data-animation="playful">Playful</button>
            </div>
          </div>

          <div class="control-group">
            <h3>Show Help For:</h3>
            <div class="button-group context-btns">
              <button data-context="general-help">General Help</button>
              <button data-context="navigation">Navigation</button>
              <button data-context="learning-companion">Learning Companion</button>
              <button data-context="curriculum-generator">Curriculum Generator</button>
              <button data-context="study-tools">Study Tools</button>
            </div>
          </div>
        </div>

        <div class="debug-log" id="debug-log">
          <p><span class="debug-timestamp">00:00:00</span> Contextual help system initialized</p>
        </div>
      </div>

      <div class="demo-sections">
        <div class="demo-section" data-help-context="curriculum-generator">
          <h3>Curriculum Generator</h3>
          <p>
            This area demonstrates how the help system provides guidance for the curriculum
            generator tool.
          </p>

          <div class="mock-form">
            <div class="form-group">
              <label for="subject">Subject:</label>
              <select id="subject">
                <option value="">Select a subject</option>
                <option value="math">Mathematics</option>
                <option value="science">Science</option>
                <option value="english">English Language Arts</option>
                <option value="history">History</option>
              </select>
            </div>

            <div class="form-group">
              <label for="grade">Grade Level:</label>
              <select id="grade">
                <option value="">Select grade level</option>
                <option value="1">1st Grade</option>
                <option value="2">2nd Grade</option>
                <option value="3">3rd Grade</option>
                <option value="4">4th Grade</option>
                <option value="5">5th Grade</option>
                <option value="6">6th Grade</option>
                <option value="7">7th Grade</option>
                <option value="8">8th Grade</option>
              </select>
            </div>

            <div class="form-group">
              <label for="format">Output Format:</label>
              <select id="format">
                <option value="">Select format</option>
                <option value="text">Text-based with dyslexia-friendly formatting</option>
                <option value="visual">Visual guide with diagrams</option>
                <option value="audio">Audio narration script</option>
                <option value="game">Interactive activities</option>
              </select>
            </div>

            <button class="btn">Generate Curriculum</button>
          </div>
        </div>

        <div class="demo-section" data-help-context="navigation">
          <h3>Navigation Help</h3>
          <p>This section demonstrates contextual help for navigation elements.</p>

          <div class="mock-nav">
            <ul>
              <li><a href="#">Dashboard</a></li>
              <li><a href="#">Courses</a></li>
              <li><a href="#">Resources</a></li>
              <li><a href="#">Progress</a></li>
              <li><a href="#">Settings</a></li>
            </ul>
          </div>
        </div>

        <div class="demo-section" data-help-context="study-tools">
          <h3>Study Tools</h3>
          <p>
            This area shows how the help system provides guidance for study tools and focus
            techniques.
          </p>

          <div class="mock-form">
            <div class="form-group">
              <label for="timer">Pomodoro Timer:</label>
              <select id="timer">
                <option value="25">25 minutes (Standard)</option>
                <option value="15">15 minutes (Short)</option>
                <option value="35">35 minutes (Extended)</option>
              </select>
            </div>

            <div class="form-group">
              <label for="background">Background Sound:</label>
              <select id="background">
                <option value="none">None</option>
                <option value="white">White Noise</option>
                <option value="nature">Nature Sounds</option>
                <option value="cafe">Cafe Ambience</option>
              </select>
            </div>

            <div class="form-group">
              <label for="focus-mode">Focus Mode:</label>
              <select id="focus-mode">
                <option value="minimal">Minimal Distractions</option>
                <option value="reading">Reading Focus</option>
                <option value="writing">Writing Focus</option>
              </select>
            </div>

            <button class="btn">Start Focus Session</button>
          </div>
        </div>

        <div class="demo-section" data-help-context="accessibility-options">
          <h3>Accessibility Options</h3>
          <p>
            This section demonstrates how the help system provides guidance for accessibility
            settings.
          </p>

          <div class="mock-form">
            <div class="form-group">
              <label for="text-size">Text Size:</label>
              <select id="text-size">
                <option value="normal">Normal</option>
                <option value="large">Large</option>
                <option value="x-large">Extra Large</option>
              </select>
            </div>

            <div class="form-group">
              <label for="color-filter">Color Filter:</label>
              <select id="color-filter">
                <option value="none">None</option>
                <option value="dyslexia">Dyslexia-friendly</option>
                <option value="high-contrast">High Contrast</option>
                <option value="reduced-blue">Reduced Blue Light</option>
              </select>
            </div>

            <div class="form-group">
              <label for="animation-speed">Animation Speed:</label>
              <select id="animation-speed">
                <option value="off">Off</option>
                <option value="slow">Slow</option>
                <option value="normal">Normal</option>
              </select>
            </div>

            <button class="btn">Apply Settings</button>
          </div>
        </div>

        <div class="demo-section" data-help-context="learning-companion">
          <h3>Learning Companion</h3>
          <p>This section demonstrates contextual help for the learning companion feature.</p>

          <div class="mock-form">
            <div class="form-group">
              <label for="companion-type">Companion Type:</label>
              <select id="companion-type">
                <option value="stella">Stella (Encouraging)</option>
                <option value="max">Max (Enthusiastic)</option>
                <option value="nova">Nova (Calm)</option>
              </select>
            </div>

            <div class="form-group">
              <label for="companion-message">Message to Companion:</label>
              <input
                type="text"
                id="companion-message"
                placeholder="Type a message to your learning companion..."
              />
            </div>

            <button class="btn">Send Message</button>
          </div>
        </div>
      </div>
    </main>

    <footer class="dashboard-footer">
      <div class="footer-content">
        <p>&copy; 2025 ShotziOS Learning Platform</p>
      </div>
    </footer>

    <!-- Scripts -->
    <script src="/js/contextual-help-bubbles.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // Wait for contextual help system to initialize
        setTimeout(() => {
          // Debug log function
          function logDebug(message) {
            const debugLog = document.getElementById('debug-log');
            const now = new Date();
            const timeString = now.toTimeString().split(' ')[0];
            const logEntry = document.createElement('p');
            logEntry.innerHTML = `<span class="debug-timestamp">${timeString}</span> ${message}`;
            debugLog.appendChild(logEntry);
            debugLog.scrollTop = debugLog.scrollHeight;
          }

          // Character buttons
          const characterBtns = document.querySelectorAll('.character-btns button');
          characterBtns.forEach((btn) => {
            btn.addEventListener('click', function () {
              characterBtns.forEach((b) => b.classList.remove('active'));
              this.classList.add('active');
              const character = this.dataset.character;

              if (window.contextualHelp.switchCharacter(character)) {
                logDebug(`Character changed to: ${character}`);
              }
            });
          });

          // Animation level buttons
          const animationBtns = document.querySelectorAll('.animation-btns button');
          animationBtns.forEach((btn) => {
            btn.addEventListener('click', function () {
              animationBtns.forEach((b) => b.classList.remove('active'));
              this.classList.add('active');
              const animation = this.dataset.animation;

              if (window.contextualHelp.setAnimationLevel(animation)) {
                logDebug(`Animation level changed to: ${animation}`);
              }
            });
          });

          // Context buttons
          const contextBtns = document.querySelectorAll('.context-btns button');
          contextBtns.forEach((btn) => {
            btn.addEventListener('click', function () {
              const context = this.dataset.context;

              if (window.contextualHelp.showHelpFor(context)) {
                logDebug(`Showing help for context: ${context}`);
              } else {
                logDebug(`Failed to show help for context: ${context}`);
              }
            });
          });

          // Log when help is shown or hidden
          const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
              if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
                for (const node of mutation.addedNodes) {
                  if (node.classList && node.classList.contains('contextual-help-bubble')) {
                    const title = node.querySelector('.help-bubble-title').textContent;
                    logDebug(`Help bubble shown: "${title}"`);
                  }
                }
              }

              if (mutation.type === 'childList' && mutation.removedNodes.length > 0) {
                for (const node of mutation.removedNodes) {
                  if (node.classList && node.classList.contains('contextual-help-bubble')) {
                    logDebug('Help bubble closed');
                  }
                }
              }
            });
          });

          // Start observing
          observer.observe(document.body, {
            childList: true,
          });

          // Show initial help after a delay
          setTimeout(() => {
            window.contextualHelp.showHelpFor('general-help');
          }, 1000);
        }, 500); // Wait for contextual help to initialize
      });
    </script>
  </body>
</html>
