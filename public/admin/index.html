<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal One School - Admin Dashboard</title>
    <link rel="stylesheet" href="/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .admin-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            background: white;
            min-height: 100vh;
        }
        
        .admin-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .admin-nav {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .admin-nav button {
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 8px;
            background: #f8f9fa;
            color: #333;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .admin-nav button.active,
        .admin-nav button:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }
        
        .admin-section {
            display: none;
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
        }
        
        .admin-section.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 2rem;
        }
        
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #333;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .image-upload {
            border: 2px dashed #ccc;
            padding: 2rem;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .image-upload:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }
        
        .image-preview {
            max-width: 200px;
            max-height: 200px;
            margin: 1rem 0;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .btn-save {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-save:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.3);
        }
        
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: none;
        }
        
        .school-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 1rem;
        }
        
        .color-picker {
            width: 60px;
            height: 40px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <div class="admin-header">
            <h1><i class="fas fa-cog"></i> Universal One School - Admin Dashboard</h1>
            <p>Manage your website content, images, and settings</p>
        </div>
        
        <div class="success-message" id="successMessage">
            <i class="fas fa-check-circle"></i> Changes saved successfully!
        </div>
        
        <nav class="admin-nav">
            <button onclick="showSection('hero')" class="active">Hero Section</button>
            <button onclick="showSection('homepage')">Homepage Content</button>
            <button onclick="showSection('schools')">Schools Management</button>
            <button onclick="showSection('images')">Images & Media</button>
            <button onclick="showSection('settings')">Site Settings</button>
        </nav>
        
        <!-- Hero Section -->
        <div id="hero" class="admin-section active">
            <h2><i class="fas fa-image"></i> Hero Section Management</h2>
            <form onsubmit="saveHero(event)">
                <div class="content-grid">
                    <div>
                        <div class="form-group">
                            <label>Hero Background Image</label>
                            <div class="image-upload" onclick="document.getElementById('heroImage').click()">
                                <i class="fas fa-cloud-upload-alt fa-3x" style="color: #ccc; margin-bottom: 1rem;"></i>
                                <p>Click to upload hero background image</p>
                                <input type="file" id="heroImage" accept="image/*" style="display: none;" onchange="previewImage('heroImage', 'heroPreview')">
                            </div>
                            <img id="heroPreview" class="image-preview" style="display: none;">
                        </div>
                        
                        <div class="form-group">
                            <label>Hero Title</label>
                            <input type="text" id="heroTitle" value="Specialized Education for Neurodivergent Minds">
                        </div>
                        
                        <div class="form-group">
                            <label>Hero Description</label>
                            <textarea id="heroDescription">Tailored learning experiences for dyslexia, ADHD, and autism spectrum with cutting-edge adaptive technology.</textarea>
                        </div>
                    </div>
                    
                    <div>
                        <div class="form-group">
                            <label>Overlay Opacity (0.0 - 1.0)</label>
                            <input type="range" id="overlayOpacity" min="0" max="1" step="0.1" value="0.4" oninput="updateOverlay()">
                            <span id="opacityValue">0.4</span>
                        </div>
                        
                        <div class="form-group">
                            <label>Hero Background Position</label>
                            <select id="heroPosition">
                                <option value="center">Center</option>
                                <option value="top">Top</option>
                                <option value="bottom">Bottom</option>
                                <option value="left">Left</option>
                                <option value="right">Right</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Hero Height (vh)</label>
                            <input type="number" id="heroHeight" value="80" min="50" max="100">
                        </div>
                        
                        <div class="form-group">
                            <label>Current Background Image</label>
                            <div id="currentHeroImage" style="margin-top: 1rem;">
                                <img src="/hero-background.jpeg" style="max-width: 200px; border-radius: 8px;" alt="Current hero background">
                            </div>
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn-save"><i class="fas fa-save"></i> Save Hero Settings</button>
            </form>
        </div>
        
        <!-- Homepage Content Section -->
        <div id="homepage" class="admin-section">
            <h2><i class="fas fa-home"></i> Homepage Content</h2>
            <form onsubmit="saveHomepage(event)">
                <div class="content-grid">
                    <div>
                        <div class="form-group">
                            <label>Site Title</label>
                            <input type="text" id="siteTitle" value="The Universal One School">
                        </div>
                        
                        <div class="form-group">
                            <label>Site Tagline</label>
                            <input type="text" id="siteTagline" value="Adaptive Education for Neurodivergent Minds">
                        </div>
                        
                        <div class="form-group">
                            <label>About Section Title</label>
                            <input type="text" id="aboutTitle" value="About Universal One School">
                        </div>
                        
                        <div class="form-group">
                            <label>About Section Content</label>
                            <textarea id="aboutContent">We believe every neurodivergent mind has unique gifts. Our specialized schools provide personalized learning experiences that celebrate cognitive differences while building essential skills for academic and life success.</textarea>
                        </div>
                    </div>
                    
                    <div>
                        <div class="form-group">
                            <label>Primary CTA Button Text</label>
                            <input type="text" id="primaryCTA" value="Explore Our Schools">
                        </div>
                        
                        <div class="form-group">
                            <label>Secondary CTA Button Text</label>
                            <input type="text" id="secondaryCTA" value="Learn Our Approach">
                        </div>
                        
                        <div class="form-group">
                            <label>Demo Button Text</label>
                            <input type="text" id="demoButtonText" value="Try AI Instructors Demo">
                        </div>
                        
                        <div class="form-group">
                            <label>Demo Description</label>
                            <textarea id="demoDescription">Try our interactive demo to see how our AI instructors adapt to different learning styles and neurodivergent needs.</textarea>
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn-save"><i class="fas fa-save"></i> Save Homepage Content</button>
            </form>
        </div>
        
        <!-- Images & Media -->
        <div id="images" class="admin-section">
            <h2><i class="fas fa-images"></i> Images & Media Management</h2>
            
            <div class="content-grid">
                <div class="school-card">
                    <h3>Logo Management</h3>
                    <div class="form-group">
                        <label>Main Logo</label>
                        <div class="image-upload" onclick="document.getElementById('logoUpload').click()">
                            <i class="fas fa-image fa-2x" style="color: #ccc;"></i>
                            <p>Upload Main Logo</p>
                            <input type="file" id="logoUpload" accept="image/*" style="display: none;" onchange="uploadImage('logo', this)">
                        </div>
                        <div style="margin-top: 1rem;">
                            <img src="/logo-main.jpeg" style="max-width: 150px; border-radius: 8px;" alt="Current logo">
                            <p><small>Current Logo</small></p>
                        </div>
                    </div>
                </div>
                
                <div class="school-card">
                    <h3>Feature Images Gallery</h3>
                    <div class="form-group">
                        <label>Feature Image 1</label>
                        <div class="image-upload" onclick="document.getElementById('feature1Upload').click()">
                            <i class="fas fa-image fa-2x" style="color: #ccc;"></i>
                            <p>Upload Feature Image 1</p>
                            <input type="file" id="feature1Upload" accept="image/*" style="display: none;" onchange="uploadImage('feature1', this)">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Feature Image 2</label>
                        <div class="image-upload" onclick="document.getElementById('feature2Upload').click()">
                            <i class="fas fa-image fa-2x" style="color: #ccc;"></i>
                            <p>Upload Feature Image 2</p>
                            <input type="file" id="feature2Upload" accept="image/*" style="display: none;" onchange="uploadImage('feature2', this)">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Feature Image 3</label>
                        <div class="image-upload" onclick="document.getElementById('feature3Upload').click()">
                            <i class="fas fa-image fa-2x" style="color: #ccc;"></i>
                            <p>Upload Feature Image 3</p>
                            <input type="file" id="feature3Upload" accept="image/*" style="display: none;" onchange="uploadImage('feature3', this)">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="school-card">
                <h3>Current Images</h3>
                <div class="content-grid">
                    <div style="text-align: center;">
                        <img src="/feature-image-1.jpeg" style="width: 100%; max-height: 150px; object-fit: cover; border-radius: 8px; margin-bottom: 0.5rem;">
                        <p><small>Feature Image 1</small></p>
                    </div>
                    <div style="text-align: center;">
                        <img src="/feature-image-2.jpeg" style="width: 100%; max-height: 150px; object-fit: cover; border-radius: 8px; margin-bottom: 0.5rem;">
                        <p><small>Feature Image 2</small></p>
                    </div>
                    <div style="text-align: center;">
                        <img src="/feature-image-3.jpeg" style="width: 100%; max-height: 150px; object-fit: cover; border-radius: 8px; margin-bottom: 0.5rem;">
                        <p><small>Feature Image 3</small></p>
                    </div>
                    <div style="text-align: center;">
                        <img src="/feature-image-4.jpeg" style="width: 100%; max-height: 150px; object-fit: cover; border-radius: 8px; margin-bottom: 0.5rem;">
                        <p><small>Feature Image 4</small></p>
                    </div>
                    <div style="text-align: center;">
                        <img src="/feature-image-5.jpeg" style="width: 100%; max-height: 150px; object-fit: cover; border-radius: 8px; margin-bottom: 0.5rem;">
                        <p><small>Feature Image 5</small></p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Schools Management -->
        <div id="schools" class="admin-section">
            <h2><i class="fas fa-school"></i> Schools Management</h2>
            
            <div class="school-card">
                <h3>Primary School</h3>
                <form onsubmit="saveSchool(event, 'primary')">
                    <div class="content-grid">
                        <div>
                            <div class="form-group">
                                <label>School Name</label>
                                <input type="text" value="Primary School" name="schoolName">
                            </div>
                            <div class="form-group">
                                <label>Description</label>
                                <textarea name="schoolDesc">Superhero-themed K-6 education tailored for young neurodivergent minds.</textarea>
                            </div>
                        </div>
                        <div>
                            <div class="form-group">
                                <label>Theme Color</label>
                                <input type="color" value="#ff6b6b" name="themeColor" class="color-picker">
                            </div>
                            <div class="form-group">
                                <label>Features (comma-separated)</label>
                                <input type="text" value="Interactive Stories, Visual Learning, Adaptive Pace" name="features">
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn-save">Save Primary School</button>
                </form>
            </div>
            
            <div class="school-card">
                <h3>Secondary School</h3>
                <form onsubmit="saveSchool(event, 'secondary')">
                    <div class="content-grid">
                        <div>
                            <div class="form-group">
                                <label>School Name</label>
                                <input type="text" value="Secondary School" name="schoolName">
                            </div>
                            <div class="form-group">
                                <label>Description</label>
                                <textarea name="schoolDesc">Grades 7-12 with mature themes designed for adolescent learners.</textarea>
                            </div>
                        </div>
                        <div>
                            <div class="form-group">
                                <label>Theme Color</label>
                                <input type="color" value="#4ecdc4" name="themeColor" class="color-picker">
                            </div>
                            <div class="form-group">
                                <label>Features (comma-separated)</label>
                                <input type="text" value="Project-Based, Self-Paced, Career Focused" name="features">
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn-save">Save Secondary School</button>
                </form>
            </div>
            
            <div class="school-card">
                <h3>Law School</h3>
                <form onsubmit="saveSchool(event, 'law')">
                    <div class="content-grid">
                        <div>
                            <div class="form-group">
                                <label>School Name</label>
                                <input type="text" value="Law School" name="schoolName">
                            </div>
                            <div class="form-group">
                                <label>Description</label>
                                <textarea name="schoolDesc">College-level legal education designed for neurodivergent students.</textarea>
                            </div>
                        </div>
                        <div>
                            <div class="form-group">
                                <label>Theme Color</label>
                                <input type="color" value="#45b7d1" name="themeColor" class="color-picker">
                            </div>
                            <div class="form-group">
                                <label>Features (comma-separated)</label>
                                <input type="text" value="Case Studies, Simulations, Legal Writing" name="features">
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn-save">Save Law School</button>
                </form>
            </div>
            
            <div class="school-card">
                <h3>Language School</h3>
                <form onsubmit="saveSchool(event, 'language')">
                    <div class="content-grid">
                        <div>
                            <div class="form-group">
                                <label>School Name</label>
                                <input type="text" value="Language School" name="schoolName">
                            </div>
                            <div class="form-group">
                                <label>Description</label>
                                <textarea name="schoolDesc">Multilingual education in English, German, and Spanish.</textarea>
                            </div>
                        </div>
                        <div>
                            <div class="form-group">
                                <label>Theme Color</label>
                                <input type="color" value="#96ceb4" name="themeColor" class="color-picker">
                            </div>
                            <div class="form-group">
                                <label>Features (comma-separated)</label>
                                <input type="text" value="Conversation, Cultural Context, Practical Usage" name="features">
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn-save">Save Language School</button>
                </form>
            </div>
        </div>
        
        <!-- Site Settings -->
        <div id="settings" class="admin-section">
            <h2><i class="fas fa-cogs"></i> Site Settings</h2>
            
            <form onsubmit="saveSettings(event)">
                <div class="content-grid">
                    <div>
                        <div class="form-group">
                            <label>Primary Color</label>
                            <input type="color" id="primaryColor" value="#667eea" class="color-picker">
                        </div>
                        
                        <div class="form-group">
                            <label>Secondary Color</label>
                            <input type="color" id="secondaryColor" value="#764ba2" class="color-picker">
                        </div>
                        
                        <div class="form-group">
                            <label>Font Family</label>
                            <select id="fontFamily">
                                <option value="Poppins">Poppins</option>
                                <option value="Inter">Inter</option>
                                <option value="Roboto">Roboto</option>
                                <option value="Open Sans">Open Sans</option>
                                <option value="Lato">Lato</option>
                            </select>
                        </div>
                    </div>
                    
                    <div>
                        <div class="form-group">
                            <label>Contact Email</label>
                            <input type="email" id="contactEmail" value="contact@universaloneSchool.com">
                        </div>
                        
                        <div class="form-group">
                            <label>Contact Phone</label>
                            <input type="tel" id="contactPhone" value="+1 (555) 123-4567">
                        </div>
                        
                        <div class="form-group">
                            <label>Address</label>
                            <textarea id="address">123 Education Drive, Learning City, LC 12345</textarea>
                        </div>
                    </div>
                </div>
                
                <button type="submit" class="btn-save"><i class="fas fa-save"></i> Save Site Settings</button>
            </form>
        </div>
    </div>
    
    <script>
        // Navigation between sections
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.admin-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all nav buttons
            document.querySelectorAll('.admin-nav button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }
        
        // Preview image function
        function previewImage(inputId, previewId) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.src = e.target.result;
                    preview.style.display = 'block';
                };
                reader.readAsDataURL(input.files[0]);
            }
        }
        
        // Update overlay opacity
        function updateOverlay() {
            const value = document.getElementById('overlayOpacity').value;
            document.getElementById('opacityValue').textContent = value;
        }
        
        // Save functions
        function saveHero(event) {
            event.preventDefault();
            const formData = new FormData();
            const heroImage = document.getElementById('heroImage').files[0];
            
            if (heroImage) {
                formData.append('heroImage', heroImage);
            }
            
            formData.append('heroTitle', document.getElementById('heroTitle').value);
            formData.append('heroDescription', document.getElementById('heroDescription').value);
            formData.append('overlayOpacity', document.getElementById('overlayOpacity').value);
            formData.append('heroPosition', document.getElementById('heroPosition').value);
            formData.append('heroHeight', document.getElementById('heroHeight').value);
            
            fetch('/api/admin/hero', {
                method: 'POST',
                body: formData
            }).then(response => response.json())
              .then(data => {
                  showSuccess();
                  if (data.success) {
                      // Refresh the page to show changes
                      setTimeout(() => window.location.reload(), 1000);
                  }
              });
        }
        
        function saveHomepage(event) {
            event.preventDefault();
            const data = {
                siteTitle: document.getElementById('siteTitle').value,
                siteTagline: document.getElementById('siteTagline').value,
                aboutTitle: document.getElementById('aboutTitle').value,
                aboutContent: document.getElementById('aboutContent').value,
                primaryCTA: document.getElementById('primaryCTA').value,
                secondaryCTA: document.getElementById('secondaryCTA').value,
                demoButtonText: document.getElementById('demoButtonText').value,
                demoDescription: document.getElementById('demoDescription').value
            };
            
            fetch('/api/admin/homepage', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data)
            }).then(() => showSuccess());
        }
        
        function saveSchool(event, schoolId) {
            event.preventDefault();
            const form = event.target;
            const data = {
                schoolId: schoolId,
                name: form.schoolName.value,
                description: form.schoolDesc.value,
                themeColor: form.themeColor.value,
                features: form.features.value.split(',').map(f => f.trim())
            };
            
            fetch('/api/admin/school', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data)
            }).then(() => showSuccess());
        }
        
        function saveSettings(event) {
            event.preventDefault();
            const data = {
                primaryColor: document.getElementById('primaryColor').value,
                secondaryColor: document.getElementById('secondaryColor').value,
                fontFamily: document.getElementById('fontFamily').value,
                contactEmail: document.getElementById('contactEmail').value,
                contactPhone: document.getElementById('contactPhone').value,
                address: document.getElementById('address').value
            };
            
            fetch('/api/admin/settings', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data)
            }).then(() => showSuccess());
        }
        
        function uploadImage(type, input) {
            if (input.files && input.files[0]) {
                const formData = new FormData();
                formData.append('image', input.files[0]);
                formData.append('type', type);
                
                fetch('/api/admin/upload', {
                    method: 'POST',
                    body: formData
                }).then(() => {
                    showSuccess();
                    setTimeout(() => window.location.reload(), 1000);
                });
            }
        }
        
        function showSuccess() {
            const message = document.getElementById('successMessage');
            message.style.display = 'block';
            setTimeout(() => {
                message.style.display = 'none';
            }, 3000);
        }
    </script>
</body>
</html>